OUTLINE: 
  os services
  user os interface
  system call
  system program
  os structure

Objective = To describe the services an operating system provides to users, processes, and other systems. To discuss various ways of structuring an os.

Major task of os:
 - Providing nice environment for users
 - Resource allocation and management

OPERATING SYSTEM SERVICES

One set of os services provides functions that are helpful to the users:
 - User interface: Command Line, GUI, Batch
 - Program Execution: Load the program into memory till execution.
 - I/O operations: A running program may require I/O, which may involve a file or an I/O device.
 - File-System Manipulation: Programs need to read and write files and directories, create and delete them, search them, list file information,permission management.
 - Communications
 - Error Detection and Handling

Another set of os functions exists for ensuring the efficient operation of the system itself via resource sharing
 - Resource Allocation: It could be CPU, Memory, File storage, I/O device
 - Accounting: Keeping track of which users use how much and what kind of resources
 - Protection and Security: Authentication

--Hierarchy--
1. User and other systems
2. User Interfaces [GUI,BATCH,COMMAND LINE(CLI)]
3. System Call
4. Services [PROGRAM EXECUTION, I/O OPERATIONS, FILE SYSTEMS,...]
5. OS
6. Hardware

COMMAND LINE INTERFACE(CLI)
 - Allows direct command entry
 - Sometimes implemented in kernel, sometimes by system program running on top of the kernel(shell in Unix)
 - Fetches a command from the user and executes it

GRAPHICAL USER INTERFACE(GUI)
 - Icons represent the programs or files
 Many os have both of them.

SYSTEM CALLS

Both mentioned above are the ways by which user interacts with the os. System call are ways by which services are accessed by application programs/ system programs. Written in high level language. Mostly accessed by programs via a high level Application Program Interface(API) rather than direct system call use. 
Three most common APIs:
 Win32 API for Windows
 POSIX (all version of UNIX)
 JAVA API for JVM

For example - When we write a normal C code for printing the "Hello World" onto the screen, we call the "printf" function which itself is a part of the library. And via the library os system call is done. 

Why use API rather than system calls?
 - Because for calling the system we would have to switch to kernel mode and it only makes the things complicated. So, we leave that for the API to handle.

System Call Implementation
A number is associated with each system call
 - System call interface maintains a table indexed according to these numbers
The system call interface invokes intended system call in OS kernel and returns status of the system call and any return values.
The caller need know nothing about how the system call is implementated
 - Just needs to obey API and understand understand what os will do as a result call
 - Most details of OS interface hidden from programmer by API
 	- Managed by run-time support library(set of functions built into libraries included with compiler)

System Call Parameter Passing
 - Often, more information is required than the identity of the desired system call
	- Exact type and amount of the information vary according to OS and call
 - Three general methods used to pass parameters to the OS
     1. Simplest: Pass the parameters in registers
          - In some cases, may be more parameters than registers
     2. Parameters stored in block, or table, in memory, and address of the block as a parameter in a register
     3. Parameters placed, or pushed, onto the stack by the program and popped off the stack by the operating system.

  Last two methods do not limit the number or length of parameters being passed.

Types of System Call              UNIX System Call
 - Process Control		: fork(), wait(), exit()
 - File Management 		: open(), read(), write(), close()
 - Device Management		: local(), read(), write() 
 - Information Maintenanace	: getpid(), alarm(), sleep() 
 - Communications		: pipe(),...
 - Protection			: chmod(),...

System Programs
 - System Progras provide a convenient environment for program development and execution. They can be divided into:
	1. File Manipulation - create, delete, copy, rename, print, list,...
	2. Status Information - date, time, amount of available memory, disk space, whi is logged on,...
	3. File Modification - text editors, grep,...
	4. Programming Language Support - compiler, debuggers,..
	5. Program loading and execution - loaders, linkers
	6. Commuinications - ftp, browsers, ssh
	7. Games, puzzles etc.

